<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Aygun AVM Fiyat Portal</title>

<style>
body { font-family: Arial; margin:20px; }
input { padding:8px; width:300px; margin-bottom:15px; }
table { border-collapse: collapse; width:100%; }
th, td { border:1px solid #ccc; padding:6px; font-size:14px; }
th { background:#f2f2f2; }
tr:hover { background:#f9f9f9; }
</style>

</head>
<body>

<h2>Aygun AVM Fiyat Listesi</h2>

<input type="text" id="searchInput" placeholder="Ürün kodu veya açıklama ara...">

<table id="urunTable">
<thead>
<tr>
<th>Kod</th>
<th>Ticari Kod</th>
<th>Stok</th>
<th>Diğer Kartlar</th>
<th>Taksitli</th>
<th>Tek Çekim</th>
<th>Nakit</th>
<th>Ürün Gamı</th>
<th>Açıklama</th>
</tr>
</thead>
<tbody></tbody>
</table>

<script>

let urunData = [];

fetch('data/urunler.json')
.then(res => res.json())
.then(data => {
    urunData = data;
    tabloyuDoldur(data);
})
.catch(err => console.error("JSON yüklenemedi:", err));

function tabloyuDoldur(data){

    const tbody = document.querySelector("#urunTable tbody");
    tbody.innerHTML = "";

    data.forEach(item => {

        const row = document.createElement("tr");

        row.innerHTML = `
            <td>${item.kod || ""}</td>
            <td>${item.ticari_kod || ""}</td>
            <td>${item.stok || ""}</td>
            <td>${item.diger_kartlar || ""}</td>
            <td>${item.taksitli || ""}</td>
            <td>${item.tek_cekim || ""}</td>
            <td>${item.nakit || ""}</td>
            <td>${item.urun_gami || ""}</td>
            <td>${item.aciklama || ""}</td>
        `;

        tbody.appendChild(row);
    });
}

document.getElementById("searchInput").addEventListener("keyup", function(){

    const value = this.value.toLowerCase();

    const filtreli = urunData.filter(item =>
        (item.kod && item.kod.toLowerCase().includes(value)) ||
        (item.aciklama && item.aciklama.toLowerCase().includes(value))
    );

    tabloyuDoldur(filtreli);
});

</script>

</body>
</html>